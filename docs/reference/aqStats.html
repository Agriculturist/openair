<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate summary statistics for air pollution data by year — aqStats â€¢ openair</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">openair</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate summary statistics for air pollution data by year</h1>
    </div>

    
    <p>Calculate a range of air pollution-relevant statistics by year and by site.</p>
    

    <pre><span class='fu'>aqStats</span>(<span class='no'>mydata</span>, <span class='kw'>pollutant</span> <span class='kw'>=</span> <span class='st'>"no2"</span>, <span class='kw'>data.thresh</span> <span class='kw'>=</span> <span class='fl'>75</span>, <span class='kw'>percentile</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>95</span>,
  <span class='fl'>99</span>), <span class='kw'>transpose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>mydata</dt>
      <dd>A data frame containing a <code>date</code> field of hourly data.</dd>
      <dt>pollutant</dt>
      <dd>The name of a pollutant e.g. <code>pollutant = c(&quot;o3&quot;,
&quot;pm10&quot;)</code>.</dd>
      <dt>data.thresh</dt>
      <dd>The data capture threshold in <!-- %. No values are -->
calculated if data capture over the period of interest is less than this
value. <code>data.thresh</code> is used for example in the calculation of daily
mean values from hourly data. If there are less than <code>data.thresh</code>
percentage of measurements available in a period, <code>NA</code> is returned.</dd>
      <dt>percentile</dt>
      <dd>Percentile values to calculate for each pollutant.</dd>
      <dt>transpose</dt>
      <dd>The default is to return a data frame with columns
representing the statistics. If <code>transpose = TRUE</code> then the results
have columns for each pollutant-site combination.</dd>
      <dt>...</dt>
      <dd>Other arguments, currently unused.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function calculates a range of common and air pollution-specific
statistics from a data frame. The statistics are calculated on an annual
basis and the input is assumed to be hourly data. The function can cope
with several sites and years. The user can control the output by setting
<code>transpose</code> appropriately.</p>
    <p>Note that the input data is assumed to be in mass units e.g. ug/m3 for all
species except CO (mg/m3).</p>
    <p>The following statistics are calculated:</p>
    <p><ul>
<li> <b>data.capture</b> --- percentage data capture
over a full year.</p>
    <p></li>
<li> <b>mean</b> --- annual mean.</p>
    <p></li>
<li> <b>minimum</b> --- minimum hourly value.</p>
    <p></li>
<li> <b>maximum</b> --- maximum hourly value.</p>
    <p></li>
<li> <b>median</b> --- median value.</p>
    <p></li>
<li> <b>max.daily</b> --- maximum daily mean.</p>
    <p></li>
<li> <b>max.rolling.8</b> --- maximum 8-hour rolling mean.</p>
    <p></li>
<li> <b>max.rolling.24</b> --- maximum 24-hour rolling mean.</p>
    <p></li>
<li> <b>percentile.95</b> --- 95th percentile. Note that several
percentiles can be calculated.</p>
    <p></li>
<li> <b>roll.8.O3.gt.100</b> --- number of days when the daily
maximum rolling 8-hour mean ozone concentration is &gt;100
ug/m3. This is the target value.</p>
    <p></li>
<li> <b>roll.8.O3.gt.120</b> --- number of days when the daily
maximum rolling 8-hour mean ozone concentration is &gt;120
ug/m3. This is the Limit Value not to be exceeded &gt; 10 days a year.</p>
    <p></li>
<li> <b>AOT40</b> --- is the accumulated amount of ozone over the
threshold value of 40 ppb for daylight hours in the growing season
(April to September). Note that <code>latitude</code> and
<code>longitude</code> can also be passed to this calculation.</p>
    <p></li>
<li> <b>hours.gt.200</b> --- number of hours NO2 is more than 200 ug/m3.</p>
    <p></li>
<li> <b>days.gt.50</b> --- number of days PM10 is more than 50 ug/m3. </li>
</ul></p>
    <p>There can be small discrepancies with the AURN due to the
treatment of rounding data. The <code>aqStats</code> function does not
round, whereas AURN data can be rounded at several stages during
the calculations.</p>
    

    <h2 class="hasAnchor" id="examples">
      <a class="anchor" href="#examples"></a>
      Examples
    </h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Statistics for 2004. NOTE! these data are in ppb/ppm so the</span>
<span class='co'>## example is for illustrative purposes only</span>
<span class='fu'>aqStats</span>(<span class='fu'><a href='selectByDate.html'>selectByDate</a></span>(<span class='no'>mydata</span>, <span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2004</span>), <span class='kw'>pollutant</span> <span class='kw'>=</span> <span class='st'>"no2"</span>)</div><div class='output co'>#&gt; Source: local data frame [1 x 15]
#&gt; Groups: site [1]
#&gt; 
#&gt;     site pollutant  year       date  dat.cap     mean minimum maximum median
#&gt;   &lt;fctr&gt;     &lt;chr&gt; &lt;int&gt;     &lt;dttm&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1   site       NO2  2004 2004-01-01 99.77231 55.00867       0     185     51
#&gt; # ... with 6 more variables: daily.max &lt;dbl&gt;, max.roll.8 &lt;dbl&gt;,
#&gt; #   max.roll.24 &lt;dbl&gt;, percentile.95 &lt;dbl&gt;, percentile.99 &lt;dbl&gt;, hours &lt;int&gt;
#&gt; </div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
David Carslaw

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
